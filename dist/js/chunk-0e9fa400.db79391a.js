(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e9fa400"],{4349:function(e,t,a){"use strict";var n=a("73b3"),o=a.n(n);o.a},"73b3":function(e,t,a){},"8e44":function(e,t,a){"use strict";function n(e,t,a,n,o){return new Promise((function(i,s){e.$http.post(t,a,n).then((function(e){var t=URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.href=t,a.setAttribute("download",o),document.body.appendChild(a),a.click()})).then((function(){i()})).catch((function(e){s(e)}))}))}function o(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise((function(s,l){"get"==o?e.$http.get(t,a).then((function(e){var t=URL.createObjectURL(new Blob([e.data],{type:"application/pdf"})),a=document.createElement("a");a.href=t,a.setAttribute("download",n),document.body.appendChild(a),a.click()})).then((function(){s()})).catch((function(e){l(e)})):e.$http.post(t,i,a).then((function(e){var t=URL.createObjectURL(new Blob([e.data],{type:"application/pdf"})),a=document.createElement("a");a.href=t,a.setAttribute("download",n),document.body.appendChild(a),a.click()})).then((function(){s()})).catch((function(e){l(e)}))}))}function i(e){return new Promise((function(t,a){l(e,localStorage.base_api+"po",{method:"post",headers:{Authorization:"bearer "+localStorage.getItem("token")},redirect:"follow"}).then((function(e){for(var t=[],a=0;a<e.length;a++){var n=(new Date).setHours(0,0,0,0),o=new Date(e[a].date_line);n=new Date(n),o=new Date(o.setDate(o.getDate()-2)),n.getTime()==o.getTime()&&t.push({date:o,data:e[a],link:"po/detail/"+e[a].id})}return localStorage.setItem("notif",JSON.stringify(t)),t})).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}function s(e,t){return new Promise((function(a,n){var o=-1;Promise.all(e.map((function(e){return o++,fetch(e,t[o])}))).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){a(e)})).catch((function(e){return n(e)}))}))}function l(e,t,a,n){return new Promise((function(n,o){fetch(t,a).then((function(t){return 401==t.status?(e.$swal("Maaf sesi login kamu sudah habis","silahkan login lagi yah...","warning"),setTimeout((function(){e.$swal.close(),e.$store.dispatch("logout").then((function(){return e.$router.replace("/login")}))}),1500),!1):500==t.status?(e.$swal("Tidak bisa mengambil data","Mohon hubungi pengembangnya...","error"),setTimeout((function(){e.$swal.close()}),1500),!1):t.json()})).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))}function r(e,t,a){return new Promise((function(n,o){fetch(t,a).then((function(t){return 401==t.status?(e.$swal("Maaf sesi login kamu sudah habis","silahkan login lagi yah...","warning"),setTimeout((function(){e.$swal.close(),e.$store.dispatch("logout").then((function(){return e.$router.replace("/login")}))}),1500),!1):500==t.status?(e.$swal("Tidak bisa menghapus data","Mohon hubungi pengembangnya...","error"),setTimeout((function(){e.$swal.close()}),1500),!1):t.json()})).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))}a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return r}))},"9c59":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CRow",[a("CCol",{attrs:{sm:"12"}},[a("CCard",[a("CCardHeader",[a("p",[a("strong",[e._v("Tambah")]),e._v(" Purchase Order ")])]),a("CCardBody",[a("CForm",{staticClass:"mt-4"},[a("CRow",{staticClass:"mx-auto d-flex justify-content-center"},[a("CCol",{attrs:{sm:"12",md:"8"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:1==e.validMsg,expression:"validMsg == true"}],staticClass:"alert alert-success"},[a("small",[e._v("Penambahan PO berhasil!")])]),a("CSelect",{attrs:{placeholder:"Pilih Sales",label:"Sales",horizontal:"",options:e.sales},on:{"update:value":e.assignSales},model:{value:e.po.id_sales,callback:function(t){e.$set(e.po,"id_sales",t)},expression:"po.id_sales"}}),a("CSelect",{attrs:{placeholder:"Pilih Konsumen",label:"Konsumen",horizontal:"",options:e.konsumen},on:{"update:value":e.assignKonsumen},model:{value:e.po.id_konsumen,callback:function(t){e.$set(e.po,"id_konsumen",t)},expression:"po.id_konsumen"}}),a("CSelect",{attrs:{placeholder:"Pilih Kurir",label:"Kurir",horizontal:"",options:e.kurir},on:{"update:value":e.assignKurir},model:{value:e.po.id_kurir,callback:function(t){e.$set(e.po,"id_kurir",t)},expression:"po.id_kurir"}}),a("CInput",{attrs:{type:"text",description:e.validator.no_msg,"is-valid":e.validator.no,autocomplete:"no",label:"Nomer PO",horizontal:"",placeholder:"Masukan Nomer PO"},on:{input:function(t){e.po.no.length<1?e.validator.no=!1:e.validator.no=!0}},model:{value:e.po.no,callback:function(t){e.$set(e.po,"no",t)},expression:"po.no"}}),a("CInput",{attrs:{type:"date",description:e.validator.date_msg,"is-valid":e.validator.date,autocomplete:"date",label:"Tanggal PO",horizontal:"",placeholder:"Masukan Tanggal PO"},on:{input:function(t){e.po.date.length<1?e.validator.date=!1:e.validator.date=!0}},model:{value:e.po.date,callback:function(t){e.$set(e.po,"date",t)},expression:"po.date"}}),a("CInput",{attrs:{type:"date",description:e.validator.date_line_msg,"is-valid":e.validator.date_line,autocomplete:"date_line",label:"Tanggal Pengiriman",horizontal:"",placeholder:"Masukan Tanggal Pengiriman"},on:{input:function(t){e.po.date_line.length<1?e.validator.date_line=!1:e.validator.date_line=!0}},model:{value:e.po.date_line,callback:function(t){e.$set(e.po,"date_line",t)},expression:"po.date_line"}}),7!=e.level&&3==e.level?a("div",[a("CInput",{attrs:{type:"date",description:e.validator.jatuh_tempo_msg,"is-valid":e.validator.jatuh_tempo,autocomplete:"jatuh_tempo",label:"TOP",horizontal:"",placeholder:"Masukan jatuh_tempo"},on:{input:function(t){e.po.jatuh_tempo.length<1?e.validator.jatuh_tempo=!1:e.validator.jatuh_tempo=!0}},model:{value:e.po.jatuh_tempo,callback:function(t){e.$set(e.po,"jatuh_tempo",t)},expression:"po.jatuh_tempo"}})],1):e._e(),a("CTextarea",{attrs:{label:"Keterangan",placeholder:"Keterangan",horizontal:"",rows:"3"},model:{value:e.po.keterangan,callback:function(t){e.$set(e.po,"keterangan",t)},expression:"po.keterangan"}}),a("CInput",{attrs:{type:"number",description:e.validator.tax_rate_msg,"is-valid":e.validator.tax_rate,autocomplete:"tax_rate",label:"Tax Rate %",horizontal:"",placeholder:"Masukan Tax Rate"},on:{input:function(t){e.po.tax_rate.length<1?e.validator.tax_rate=!1:e.validator.tax_rate=!0}},model:{value:e.po.tax_rate,callback:function(t){e.$set(e.po,"tax_rate",t)},expression:"po.tax_rate"}}),a("CInput",{attrs:{type:"number",description:e.validator.sales_fee_msg,"is-valid":e.validator.sales_fee,autocomplete:"sales_fee",label:"Sales Fee",horizontal:"",placeholder:"Masukan Sales Fee"},on:{input:function(t){e.po.sales_fee.length<1?e.validator.sales_fee=!1:e.validator.sales_fee=!0}},model:{value:e.po.sales_fee,callback:function(t){e.$set(e.po,"sales_fee",t)},expression:"po.sales_fee"}}),a("CInput",{attrs:{type:"number",description:e.validator.other_msg,"is-valid":e.validator.other,autocomplete:"other",label:"Other",horizontal:"",placeholder:"Other"},on:{input:function(t){e.po.other.length<1?e.validator.other=!1:e.validator.other=!0}},model:{value:e.po.other,callback:function(t){e.$set(e.po,"other",t)},expression:"po.other"}}),a("CTextarea",{attrs:{label:"Catatan",placeholder:"Catatan",horizontal:"",rows:"3"},model:{value:e.po.catatan,callback:function(t){e.$set(e.po,"catatan",t)},expression:"po.catatan"}})],1),a("CCol",{attrs:{sm:"12",md:"2"}},[a("button",{staticClass:"btn btn-success",on:{click:function(t){t.preventDefault(),e.openKonsumenModal=!0}}},[a("i",{staticClass:"fa fa-search mr-1"}),e._v("Cari Konsumen")])])],1)],1)],1),a("CCardFooter",{staticClass:"d-flex justify-content-center mt-4"},[a("CButton",{staticClass:"mr-2",attrs:{type:"submit",color:"primary"},on:{click:function(t){return t.preventDefault(),e.addPO(t)}}},[a("i",{staticClass:"fa fa-plus mr-1"}),e._v(e._s(e.label)+" ")])],1)],1)],1)],1),a("CModal",{attrs:{show:e.openKonsumenModal,"no-close-on-backdrop":!0,title:"Cari Konsumen",size:"lg",color:"dark"},on:{"update:show":function(t){e.openKonsumenModal=t}},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"modal-title"},[e._v("Cari Konsumen")]),a("CButtonClose",{staticClass:"text-white",on:{click:function(t){e.openKonsumenModal=!1}}})]},proxy:!0}])},[a("CInput",{staticClass:"m-4",attrs:{type:"text",description:"Ketik minimal 3 huruf untuk melihat hasil",label:"Cari Konsumen",horizontal:"",placeholder:"Masukan kata"},model:{value:e.konsumenKeyword,callback:function(t){e.konsumenKeyword=t},expression:"konsumenKeyword"}}),a("v-client-table",{staticClass:"m-4",attrs:{data:e.searchKonsumen,columns:e.searchKonsumenFields,options:e.searchKonsumenOptions,id:"search-konsumen-table"},scopedSlots:e._u([{key:"aksi",fn:function(t){return a("div",{},[a("button",{staticClass:"btn btn-primary",on:{click:function(a){return e.assignKonsumen(t.row.id)}}},[e._v("Pilih")])])}}])})],1)],1)},o=[];function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}var r=function(){function e(){i(this,e),this.notif=[],localStorage.setItem("notif",JSON.stringify(this.notif))}return l(e,[{key:"dispatch",value:function(){return localStorage.notif}},{key:"add",value:function(e){var t=JSON.parse(localStorage.getItem("notif"));t.push(e),localStorage.setItem("notif",JSON.stringify(t))}},{key:"remove",value:function(e){var t=JSON.parse(localStorage.getItem("notif"));return t.splice(e.index-1,1),localStorage.setItem("notif",JSON.stringify(t)),localStorage.notif}}]),e}(),u=(a("8e44"),{name:"AddPO",data:function(){return{level:localStorage.level,konsumenDetail:[],konsumenKeyword:null,openKonsumenModal:!1,searchKonsumen:[],searchKonsumenFields:["nama","email","wa_hp","nama_instansi","aksi"],searchKonsumenOptions:{headings:{nama:"Nama",email:"Email",wa_hp:"Whatsapp",nama_instansi:"Perusahaan",aksi:"Aksi"},sortable:["nama","email","wa_hp","nama_instansi"],filterable:["nama","email","wa_hp","nama_instansi"],columnsClasses:{nama:"align-middle",email:"align-middle",wa_hp:"align-middle text-center",nama_instansi:"align-middle",aksi:"align-middle text-center"}},notif:void 0,validMsg:!1,errors:[],label:"Tambah Purchase Order",salesselected:1,konsumenselected:1,statusselected:1,kurir:[],sales:[],konsumen:[],validator:{no:null,no_msg:null,date:null,date_msg:null,date_line:null,date_line_msg:null,jatuh_tempo:null,jatuh_tempo_msg:null,tax_rate:null,tax_rate_msg:null,sales_fee:null,sales_fee_msg:null,other:null,other_msg:null},po:{id_sales:null,id_konsumen:null,id_kurir:null,status:1,no:null,date:null,date_line:null,jatuh_tempo:"2020-02-02",tax_rate:null,sales_fee:null,other:null,catatan:null}}},watch:{konsumenKeyword:function(e){if(e.length>=3&&(null!=e||""!=e)){var t=this.konsumenDetail.filter((function(t){return t.nama.toLowerCase().indexOf(e)>-1}));t.length>0?this.searchKonsumen=t:this.searchKonsumen=[]}}},methods:{getStringLength:function(e){var t=e.split(" ");return t.length},extractString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=e.split(" "),n="";if(t<2)for(var o=0;o<t;o++)n+=" "+a[o];else if(t<=3)for(var i=0;i<t;i++)n+=" "+a[i];else{t=3;for(var s=0;s<t;s++)n+=" "+a[s]}return n},assignKurir:function(e){this.po.id_kurir=e},assignStatus:function(e){this.po.status=e},assignKonsumen:function(e){1==this.openKonsumenModal&&(this.openKonsumenModal=!1),this.po.id_konsumen=e},assignSales:function(e){this.po.id_sales=e},addPO:function(){var e=this;if(this.errors=[],this.po.no||(this.validator.no=!1,this.validator.no_msg="Harap isi nomer PO",this.errors.push("no kosong")),this.po.date||(this.validator.date=!1,this.validator.date_msg="Harap isi Tanggal PO",this.errors.push("date kosong")),this.po.date_line||(this.validator.date_line=!1,this.validator.date_line_msg="Harap isi tanggal pengiriman",this.errors.push("date_line kosong")),this.po.tax_rate||(this.validator.tax_rate=!1,this.validator.tax_rate_msg="Harap isi Tax Rate",this.errors.push("tax_rate kosong")),this.po.sales_fee||(this.validator.sales_fee=!1,this.validator.sales_fee_msg="Harap isi sales fee",this.errors.push("sales_fee kosong")),this.po.id_sales&&"000"!=this.po.id_sales||(this.errors.push("Harap pilih Sales"),this.$swal("Harap pilih Sales","","warning"),setTimeout((function(){return e.$swal.close()}),1500)),this.po.id_konsumen&&"000"!=this.po.id_konsumen||(this.errors.push("Harap pilih konsumen"),this.$swal("Harap pilih konsumen","","warning"),setTimeout((function(){return e.$swal.close()}),1500)),this.po.id_kurir&&"000"!=this.po.id_kurir||(this.errors.push("Harap pilih kurir"),this.$swal("Harap pilih kurir","","warning"),setTimeout((function(){return e.$swal.close()}),1500)),this.errors.length)return window.scrollBy({top:-500,left:0,behavior:"smooth"}),!1;this.notif=new r;var t=new Date(this.po.date);this.notif.add(this.po),this.label="Loading...",this.$http.post(localStorage.base_api+"po",this.po,{headers:{Authorization:"bearer "+localStorage.token},redirect:"follow"}).then((function(a){e.po.notif_date=new Date(t.setDate(t.getDate()-2)),e.label="Tambah Purchase Order",e.$swal("Purchase Order berhasil ditambah","Mohon tunggu sebentar...","success"),setTimeout((function(){e.$swal.close(),e.$router.push("/po")}),1500)})).catch((function(t){return e.label="Tambah Purchase Order",401==t.response.status?e.$store.dispatch("logout").then((function(){var t=window.location.href;t=t.split("/"),localStorage.setItem("prevPath",t[t.length-1]),e.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){e.$swal.close(),e.$router.replace({path:"/login"})}),1500)})).catch((function(t){return e.$swal("Tidak bisa ambil data","hubungi pengembangnya...","error"),setTimeout((function(){e.$swal.close()}),1500),!1})):500==t.response.status&&(e.$swal("Tidak bisa ambil data","hubungi pengembangnya...","error"),setTimeout((function(){e.$swal.close()}),1500)),console.log(t.response),!1}))},getRequest:function(e,t){var a=this;this.$http.post(e,{headers:{Authorization:"bearer "+localStorage.getItem("token")},redirect:"follow"}).then((function(e){t(e.data)})).catch((function(e){return a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),console.error(e),!1}))},fetchAll:function(){var e=this;this.getRequest(localStorage.base_api+"sales",(function(t){e.sales.push({value:"000",label:"Pilih Sales"});for(var a=0;a<t.length;a++){var n={};n.value=t[a].id,n.label=t[a].nama_karyawan,e.sales.push(n)}})),this.getRequest(localStorage.base_api+"kurir",(function(t){e.kurir.push({value:"000",label:"Pilih Kurir"});for(var a=0;a<t.length;a++){var n={};n.value=t[a].id,n.label=t[a].nama_karyawan,e.kurir.push(n)}})),this.getRequest(localStorage.base_api+"konsumen",(function(t){e.konsumen.push({value:"000",label:"Pilih Konsumen"}),e.konsumenDetail=t;for(var a=0;a<t.length;a++){var n={};n.value=t[a].id,n.label=t[a].nama+" - "+e.extractString(t[a].alamat,e.getStringLength(t[a].alamat)),e.konsumen.push(n)}}))}},created:function(){5!=localStorage.level&&4!=localStorage.level||this.$router.push("/"),this.fetchAll()}}),c=u,d=(a("4349"),a("2877")),h=Object(d["a"])(c,n,o,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-0e9fa400.db79391a.js.map