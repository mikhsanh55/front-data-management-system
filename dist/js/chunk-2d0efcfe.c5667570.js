(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0efcfe"],{"9a66":function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("CCard",[t("CCardHeader",[t("p",[t("b",[a._v("Edit")]),a._v(" Asset")])]),t("CCardBody",[t("CForm",{staticClass:"mt-4"},[t("CRow",{staticClass:"mx-auto d-flex justify-content-center"},[t("CCol",{attrs:{sm:"8"}},[t("p",{directives:[{name:"show",rawName:"v-show",value:1==a.validMsg,expression:"validMsg == true"}],staticClass:"alert alert-success"},[t("small",[a._v("Asset berhasil diperbaharui!")])]),t("input",{ref:"id",attrs:{type:"hidden",name:"id",id:a.asset.id}}),t("CInput",{attrs:{type:"text",description:a.validator.kode_msg,"is-valid":a.validator.kode,autocomplete:"kode",label:"Kode Asset",horizontal:"",placeholder:"Masukan Kode Asset"},on:{input:function(e){a.asset.kode.length<1?a.validator.kode=!1:a.validator.kode=!0}},model:{value:a.asset.kode,callback:function(e){a.$set(a.asset,"kode",e)},expression:"asset.kode"}}),t("CTextarea",{attrs:{description:a.validator.deskripsi_barang_msg,"is-valid":a.validator.deskripsi_barang,label:"Masukan Deskripsi Asset",placeholder:"Masukan Deskripsi Asset",horizontal:"",rows:"3"},on:{input:function(e){a.asset.deskripsi_barang.length<1?a.validator.deskripsi_barang=!1:a.validator.deskripsi_barang=!0}},model:{value:a.asset.deskripsi_barang,callback:function(e){a.$set(a.asset,"deskripsi_barang",e)},expression:"asset.deskripsi_barang"}}),t("CSelect",{attrs:{label:"Karyawan",horizontal:"",options:a.karyawan},on:{"update:value":a.assignKaryawan},model:{value:a.asset.id,callback:function(e){a.$set(a.asset,"id",e)},expression:"asset.id"}}),t("CInput",{attrs:{type:"date",description:a.validator.tanggal_beli_msg,"is-valid":a.validator.tanggal_beli,autocomplete:"tanggal_beli",label:"Tanggal Beli",horizontal:"",placeholder:"Masukan Tanggal Beli"},on:{input:function(e){a.asset.tanggal_beli.length<1?a.validator.tanggal_beli=!1:a.validator.tanggal_beli=!0}},model:{value:a.asset.tanggal_beli,callback:function(e){a.$set(a.asset,"tanggal_beli",e)},expression:"asset.tanggal_beli"}}),t("CInput",{attrs:{type:"date",description:a.validator.tanggal_expired_msg,"is-valid":a.validator.tanggal_expired,autocomplete:"tanggal_expired",label:"Tanggal Expired",horizontal:"",placeholder:"Masukan Tanggal Expired"},on:{input:function(e){a.asset.tanggal_expired.length<1?a.validator.tanggal_expired=!1:a.validator.tanggal_expired=!0}},model:{value:a.asset.tanggal_expired,callback:function(e){a.$set(a.asset,"tanggal_expired",e)},expression:"asset.tanggal_expired"}})],1)],1)],1)],1),t("CCardFooter",{staticClass:"d-flex justify-content-center mt-4"},[t("CButton",{attrs:{type:"submit",color:"light"},on:{click:function(e){return e.preventDefault(),a.updateAsset(e)}}},[t("i",{staticClass:"fa fa-edit mr-2"}),a._v(a._s(a.label)+" ")])],1)],1)],1)},n=[],i={name:"EditAsset",data:function(){return{label:"Simpan Perubahan",karyawanselected:1,validator:{kode:null,kode_msg:null,deskripsi_barang:null,deskripsi_barang_msg:null,tanggal_beli:null,tanggal_beli_msg:null,tanggal_expired:null,tanggal_expired_msg:null},asset:{kode:null,deskripsi_barang:null,id:null,tanggal_beli:"0000-00-00",tanggal_expired:"0000-00-00"},validMsg:!1,karyawan:[],errors:[]}},methods:{getKaryawan:function(){var a=this,e=new Headers;e.append("Authorization","bearer "+localStorage.getItem("token"));var t={method:"GET",headers:e,redirect:"follow"};fetch("https://young-temple-67589.herokuapp.com/api/karyawan",t).then((function(a){return a.json()})).then((function(e){for(var t=0;t<e.length;t++){var s={};s.value=e[t].id,s.label=e[t].nama_karyawan,a.karyawan.push(s)}})).then((function(){a.getData()})).catch((function(e){return a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){a.$swal.close()}),1500),console.error(e),!1}))},assignJabatan:function(a){this.asset.jabatan=a},assignKaryawan:function(a){this.asset.id=a},getData:function(){var a=this,e=new Headers;e.append("Authorization","bearer "+localStorage.token);var t={method:"POST",headers:e,redirect:"follow"};fetch("https://young-temple-67589.herokuapp.com/api/assets/"+this.$route.params.id,t).then((function(a){return a.json()})).then((function(e){a.jabatanselected=e.jabatan,a.karyawanselected=e.id,a.asset=e,console.log(a.asset)})).catch((function(e){return 401==e.response.status?a.$store.dispatch("logout").then((function(){var e=window.location.href;e=e.split("/"),localStorage.setItem("prevPath",e[e.length-1]),a.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$router.replace({path:"/login"})}),1500)})).catch((function(e){return a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){a.$swal.close()}),1500),!1})):500==e.response.status&&(a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){a.$swal.close()}),1500)),console.log(e.response),!1}))},updateAsset:function(){var a=this;if(this.errors=[],this.asset.kode||(this.validator.kode=!1,this.validator.kode_msg="Harap isi kode asset",this.errors.push("kode asset kosong")),this.asset.tanggal_beli&&"0000-00-00"!=this.asset.tanggal_beli||(this.validator.tanggal_beli=!1,this.validator.tanggal_beli_msg="Harap isi tanggal beli",this.errors.push("tgl_beli karyawan kosong")),this.asset.tanggal_expired&&"0000-00-00"!=this.asset.tanggal_expired||(this.validator.tanggal_expired=!1,this.validator.tgl_expired_msg="Harap isi tanggal kadaluarsa",this.errors.push("tgl_expired karyawan kosong")),this.errors.length)return window.scrollBy({top:-250,left:0,behavior:"smooth"}),!1;this.label="Loading...";var e=new FormData;e.append("kode",this.asset.kode),e.append("id_karyawan",this.asset.id),e.append("deskripsi_barang",this.asset.deskripsi_barang),e.append("tanggal_beli",this.asset.tanggal_beli),e.append("tanggal_expired",this.asset.tanggal_expired),this.$http.post("https://young-temple-67589.herokuapp.com/api/assets/edit/"+this.$route.params.id,e,{headers:{Authorization:"bearer "+localStorage.token}}).then((function(e){a.label="Simpan Perubahan",a.$swal("Update data asset berhasil","Mohon tunggu sebentar...","success"),setTimeout((function(){a.$swal.close(),a.$router.push({path:"/asset"})}),1500)})).catch((function(e){return a.label="Simpan Perubahan",401!=e.response.status?(a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){a.$swal.close()}),1500),a.label="Simpan Perubahan",console.log(e),!1):(a.$store.dispatch("logout").then((function(){var e=window.location.href;e=e.split("/"),localStorage.setItem("prevPath",e[e.length-1]),a.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$router.replace({path:"/login"})}),1500)})).catch((function(e){return a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){a.$swal.close()}),1500),!1})),!1)}))}},created:function(){this.getKaryawan()}},l=i,r=t("2877"),o=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0efcfe.c5667570.js.map