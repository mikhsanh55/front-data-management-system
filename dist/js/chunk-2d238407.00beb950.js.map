{"version":3,"sources":["webpack:///./src/views/users/AddUser.vue?6bb5","webpack:///src/views/users/AddUser.vue","webpack:///./src/views/users/AddUser.vue?a441","webpack:///./src/views/users/AddUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","directives","name","rawName","value","validMsg","expression","karyawan","on","assignKaryawan","model","user","callback","$$v","$set","validator","email_msg","email","$event","length","password_msg","password","jabatan","assignJabatan","preventDefault","addUser","_s","label","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d238407.00beb950.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('CCard',[_c('CCardHeader',[_c('p',[_c('b',[_vm._v(\"Tambah\")]),_vm._v(\" User\")])]),_c('CCardBody',[_c('CForm',{staticClass:\"mt-4\"},[_c('CRow',{staticClass:\"mx-auto d-flex justify-content-center\"},[_c('CCol',{attrs:{\"sm\":\"8\"}},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.validMsg == true),expression:\"validMsg == true\"}],staticClass:\"alert alert-success\"},[_c('small',[_vm._v(\"Penambahan User berhasil!\")])]),_c('CSelect',{attrs:{\"label\":\"Nama Karyawan\",\"horizontal\":\"\",\"options\":_vm.karyawan,\"description\":\"Masukan Nama Karyawan\",\"autocomplete\":\"nama_karyawan\"},on:{\"update:value\":_vm.assignKaryawan},model:{value:(_vm.user.id_karyawan),callback:function ($$v) {_vm.$set(_vm.user, \"id_karyawan\", $$v)},expression:\"user.id_karyawan\"}}),_c('CInput',{attrs:{\"type\":\"email\",\"description\":_vm.validator.email_msg,\"is-valid\":_vm.validator.email,\"autocomplete\":\"email\",\"label\":\"Email\",\"horizontal\":\"\",\"placeholder\":\"Masukan Email\",\"readonly\":\"\"},on:{\"input\":function($event){_vm.user.email.length < 1 ? _vm.validator.email = false : _vm.validator.email = true}},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}}),_c('CInput',{attrs:{\"type\":\"password\",\"description\":_vm.validator.password_msg,\"is-valid\":_vm.validator.password,\"autocomplete\":\"password\",\"label\":\"Password\",\"horizontal\":\"\",\"placeholder\":\"Masukan Password\"},on:{\"input\":function($event){_vm.user.password.length < 1 ? _vm.validator.password = false : _vm.validator.password = true}},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('CSelect',{attrs:{\"label\":\"Jabatan\",\"horizontal\":\"\",\"options\":_vm.jabatan},on:{\"update:value\":_vm.assignJabatan}})],1)],1)],1)],1),_c('CCardFooter',{staticClass:\"d-flex justify-content-center mt-4\"},[_c('CButton',{attrs:{\"type\":\"submit\",\"color\":\"light\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addUser($event)}}},[_c('i',{staticClass:\"fa fa-plus mr-1\"}),_vm._v(_vm._s(_vm.label)+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<CCard>\n\t\t\t<CCardHeader>\n\t\t\t\t<p><b>Tambah</b> User</p>\n\t\t\t</CCardHeader>\n\t\t\t<CCardBody>\n\t\t\t\t<CForm class=\"mt-4\">\n\t\t\t\t\t<CRow class=\"mx-auto d-flex justify-content-center\">\n\t\t\t\t\t\t<CCol sm=\"8\">\n\t\t\t\t\t\t\t  <p v-show=\"validMsg == true\" class=\"alert alert-success\">\n\t\t                        <small>Penambahan User berhasil!</small>\n\t\t                      </p>    \n\n\t\t                    <CSelect\n\t\t                    \tlabel=\"Nama Karyawan\"\n\t\t                    \thorizontal\n\t\t                    \t:options=\"karyawan\"\n\t\t                        description=\"Masukan Nama Karyawan\"\n\t\t                        autocomplete=\"nama_karyawan\"\n\t\t                        v-model=\"user.id_karyawan\"\n\t\t                        @update:value=\"assignKaryawan\"\n\t\t                      />\n\t\t                    <CInput\n\t\t                        type=\"email\"\n\t\t                        :description=\"validator.email_msg\"\n\t\t                        :is-valid=\"validator.email\"\n\t\t                        @input=\"user.email.length < 1 ? validator.email = false : validator.email = true\"\n\t\t                        autocomplete=\"email\"\n\t\t                        label=\"Email\"\n\t\t                        horizontal\n\t\t                        placeholder=\"Masukan Email\"\n\t\t                        v-model=\"user.email\"\n\t\t                        readonly\n\t\t                      />  \n\t\t                      <CInput\n\t\t                        type=\"password\"\n\t\t                        :description=\"validator.password_msg\"\n\t\t                        :is-valid=\"validator.password\"\n\t\t                        @input=\"user.password.length < 1 ? validator.password = false : validator.password = true\"\n\t\t                        autocomplete=\"password\"\n\t\t                        label=\"Password\"\n\t\t                        horizontal\n\t\t                        placeholder=\"Masukan Password\"\n\t\t                        v-model=\"user.password\"\n\t\t                      /> \n\t\t                      <CSelect\n\t\t                      label=\"Jabatan\"\n\t\t                      horizontal\n\t\t                      :options=\"jabatan\"\n\t\t                      @update:value=\"assignJabatan\"\n\t\t                      />\n\t                        \n\t\t\t\t\t\t</CCol>\n\t\t\t\t\t</CRow>\n\t\t\t\t</CForm>\n\t\t\t</CCardBody>\n\t\t\t<CCardFooter class=\"d-flex justify-content-center mt-4\">\n\t\t\t\t<CButton type=\"submit\" color=\"light\" @click.prevent=\"addUser\">\n\t\t\t\t\t<i class=\"fa fa-plus mr-1\"></i>{{label}}\n\t\t\t\t</CButton>\n\t\t\t</CCardFooter>\n\t\t</CCard>\n\t</div>\n</template>\n<script type=\"text/javascript\">\n\texport default {\n\t\tname:\"AddUser\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tlabel: 'Tambah User',\n\t\t\t\tvalidator: {\n\t\t\t\t\temail:null,\n\t\t\t\t\temail_msg:null,\n\t\t\t\t\tpassword:null,\n\t\t\t\t\tpassword_msg:null\n\t\t\t\t},\n\t\t\t\tuser: {\n\t\t\t\t\tid_karyawan:null,\n\t\t\t\t\temail: null,\n\t\t\t\t\tpassword:null,\n\t\t\t\t\tlevel:null\n\t\t\t\t},\n\t\t\t\tkaryawan: [],\n\t\t\t\tdata_karyawan:[],\n\t\t\t\tjabatan: [],\n\t\t\t\tvalidMsg:false,\n\t\t\t\terrors:[]\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetJabatan() {\n\t\t\t\tthis.jabatan.push({value:'000', label: 'Pilih Jabatan'})\n\t\t\t\tthis.$http.get(localStorage.base_api + 'jabatan', {\n\t      \t\t\theaders: {\n\t      \t\t\t\t'Authorization': 'bearer ' + localStorage.token\n\t      \t\t\t}\n\t      \t\t})\n\t      \t\t.then(res => {\n\t      \t\t\t// console.log(res.data)\n\t      \t\t\tfor(let i = 0;i < res.data.length;i++) {\n\t      \t\t\t\tlet obj = {}\n\t      \t\t\t\tobj.value = res.data[i].id\n\t      \t\t\t\tobj.label = res.data[i].nama\n\t      \t\t\t\tthis.jabatan.push(obj)\n\t      \t\t\t}\n\t      \t\t\tconsole.log(this.jabatan)\n\t      \t\t})\n\t      \t\t.catch(e => {\n\t      \t\t\talert('Maaf lagi ada error sedikit :D')\n\t      \t\t\tconsole.error(e.response)\n\t      \t\t\treturn false\n\t      \t\t})\n\t\t\t},\n\t\t\tgetKaryawan() {\n\t\t\t\tthis.karyawan.push({value: '000', label: 'Pilih Karyawan'})\n\t\t\t\tlet headers = new Headers()\n\t\t\t\theaders.append('Authorization', 'bearer ' + localStorage.getItem('token'))\n\t\t\t\tlet options = {\n\t\t\t\t\tmethod:'GET',\n\t\t\t\t\theaders,\n\t\t\t\t\tredirect:'follow'\n\t\t\t\t}\n\t\t\t\tfetch(localStorage.base_api + 'karyawan', options)\n\t\t\t\t.then(res => res.json())\n\t\t\t\t\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.data_karyawan = res\n\t\t\t\t\tfor(let i = 0;i < res.length;i++) {\n\t      \t\t\t\tlet obj = {}\n\t      \t\t\t\tobj.value = res[i].id\n\t      \t\t\t\tobj.label = res[i].nama_karyawan\n\t      \t\t\t\tthis.karyawan.push(obj)\n\t      \t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.getJabatan()\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\talert('Maaf lagi ada error sedikit :D')\n\t      \t\t\tconsole.error(e)\n\t      \t\t\treturn false\n\t\t\t\t})\n\t\t\t},\n\t\t\tassignKaryawan(val) {\n\t\t\t\tthis.user.id_karyawan = val\n\t\t\t\tthis.data_karyawan.forEach((item, i) => {\n\t\t\t\t\tif(val == item.id) {\n\t\t\t\t\t\tthis.user.email = item.email\n\t\t\t\t\t\tthis.user.level = item.id_jabatan\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\tconsole.log(val)\n\t\t\t},\n\t\t\tassignJabatan(val) {\n\t\t\t\tthis.user.level = val\n\t\t\t},\n\t\t\taddUser() {\n\t\t\t\tthis.errors = []\n\t\t\t\tif(!this.user.email) {\n\t\t\t\t\tthis.validator.email = false\n\t\t            this.validator.email_msg = 'Harap isi email karyawan'\n\t\t            this.errors.push('email karyawan kosong')\n\t\t\t\t}\n\t\t\t\tif(!this.user.password) {\n\t\t\t\t\tthis.validator.password = false\n\t\t            this.validator.password_msg = 'Harap isi password karyawan'\n\t\t            this.errors.push('password karyawan kosong')\n\t\t\t\t}\n\n\t\t\t\tif(!this.user.id_jabatan || this.user.id_jabatan == '000') {\n\t\t\t\t\tthis.errors.push('Harap pilih jabatan')\n\t\t\t\t\tthis.$swal('Harap pilih jabatan', '', 'warning')\n\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t}\n\n\n\t\t\t\tif(!this.user.id_karyawan || this.user.id_karyawan == '000') {\n\t\t\t\t\tthis.errors.push('Harap pilih karyawan')\n\t\t\t\t\tthis.$swal('Harap pilih karyawan', '', 'warning')\n\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t}\n\n\t\t\t\tif(!this.errors.length) {\n\t\t\t\t\tconsole.log(this.user)\n\t\t\t\t\tthis.label = 'Loading...'\n\t\t\t\t\tthis.$http.post(localStorage.base_api + 'user', this.user, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Authorization': 'bearer ' + localStorage.getItem('token')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tredirect:'follow'\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.label = 'Tambah User'\n\t\t\t\t\t\talert(res.data.message)\n\t\t\t\t\t\tthis.$swal(res.data.message, 'Mohon tunggu sebentar...', 'success')\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.$swal.close()\n\t\t\t\t\t\t\tthis.$router.push('/user')\t\n\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\tconsole.warn(e.response)\n\t\t\t\t\t\tif(e.response.status == 401) {\n\t\t                  this.$store.dispatch('logout')\n\t\t                  .then(() => {\n\t\t                    let path = window.location.href\n\t\t                    path = path.split('/')\n\t\t                    localStorage.setItem('prevPath', path[path.length - 1])\n\t\t                    this.$swal('Sesi Login kamu udah habis', 'login lagi yah', 'warning')\n\t\t                    setTimeout(() => {\n\t\t                    \tthis.$swal.close()\n\t\t                    \tthis.$router.replace({path: '/login'})\n\t\t                    }, 1500)\n\t\t                    return false\n\t\t                  })\n\t\t                  .catch(e => {\n\t\t                  \tconsole.log(e)\n\t\t                    this.$swal('Tidak bisa menambah data', 'hubungi pengembangnya yah', 'error')\n\t\t                    setTimeout(() => {\n\t\t                    \tthis.$swal.close()\n\t\t                    }, 1500)\n\t\t                    return false\n\t\t                  })\n\t\t                }\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.label = 'Tambah User'\n\t\t\t\t\t\t\tfor(let item in e.response.data.errmsg) {\n\t\t\t\t\t\t\t\tconsole.log(e.response.data.errmsg[item][0])\n\t\t\t\t\t\t\t\tthis.$swal(e.response.data.errmsg[item][0], 'hubungi pengembangnya yah', 'error')\n\t\t\t                    setTimeout(() => {\n\t\t\t                    \tthis.$swal.close()\n\t\t\t                    }, 1500)\t\n\t\t\t\t\t\t\t}\n\t\t                    return false\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tif(localStorage.level != 1 && localStorage.level != 2) {\n\t\t\t\tthis.$router.push('/')\n\t\t\t}\n\t\t\tthis.getKaryawan()\n\t\t}\n\t}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddUser.vue?vue&type=template&id=217cf942&\"\nimport script from \"./AddUser.vue?vue&type=script&lang=js&\"\nexport * from \"./AddUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}