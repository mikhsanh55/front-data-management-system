(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f14a78f"],{"0647":function(a,t,n){},"6a1a":function(a,t,n){"use strict";var e=n("0647"),o=n.n(e);o.a},"8e44":function(a,t,n){"use strict";function e(a,t,n,e,o){return new Promise((function(r,i){a.$http.post(t,n,e).then((function(a){var t=URL.createObjectURL(new Blob([a.data],{type:"application/vnd.ms-excel"})),n=document.createElement("a");n.href=t,n.setAttribute("download",o),document.body.appendChild(n),n.click()})).then((function(){r()})).catch((function(a){i(a)}))}))}function o(a,t,n,e){return new Promise((function(o,r){a.$http.get(t,n).then((function(a){var t=URL.createObjectURL(new Blob([a.data],{type:"application/pdf"})),n=document.createElement("a");n.href=t,n.setAttribute("download",e),document.body.appendChild(n),n.click()})).then((function(){o()})).catch((function(a){r(a)}))}))}function r(a,t,n,e){return new Promise((function(a,e){fetch(t,n).then((function(a){return a.json()})).then((function(t){return a(t)})).catch((function(a){return e(a)}))}))}function i(a){return new Promise((function(t,n){a.$http.get("https://young-temple-67589.herokuapp.com/api/po",{headers:{Authorization:"bearer "+localStorage.token}}).then((function(a){for(var t=[],n=[],e=0;e<a.data.length;e++){var o=new Date(a.data[e].date_line),r=new Date(o.setDate(o.getDate()-2));t.push({date:r,data:a.data[e],link:"/po/"+a.data[e].id})}for(var i=0;i<t.length;i++){var l=new Date,s=new Date(t[i].date);l==s&&n.push({date:t[i].date,data:t[i]})}return localStorage.setItem("notif",JSON.stringify(n)),n})).then((function(a){return t(a)})).catch((function(a){return n(a)}))}))}n.d(t,"b",(function(){return e})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i}))},bfa5:function(a,t,n){"use strict";n.r(t);var e=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",[n("CCard",[n("CCardHeader",[n("b",[a._v("Data")]),a._v(" Barang Pesanan ")]),n("CCardBody",[n("CRow",[n("CCol",{attrs:{sm:"12"}},[n("button",{staticClass:"float-right mb-4 ml-2 btn btn-light",on:{click:function(t){a.modal=!0}}},[n("small",[n("i",{staticClass:"fa fa fa-file-excel-o mr-1"}),a._v(" Export .xlsx")])]),n("v-client-table",{attrs:{data:a.barangPesanan,columns:a.tableFields,options:a.tableOptions,id:"barang-pesanan-table"},scopedSlots:a._u([{key:"aksi",fn:function(t){return n("div",{},[n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(n){return a.storePDF(t.row.id)}}},[n("i",{staticClass:"fa fa-file-pdf-o"})]),n("router-link",{staticClass:"btn btn-edit btn-sm",attrs:{to:"/barang-pesanan/edit/"+t.row.id}},[n("i",{staticClass:"fa fa-edit"})]),n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(n){return a.confirmBarangPesanan(t.row.id)}}},[n("i",{staticClass:"fa fa-trash"})])],1)}}])})],1)],1)],1)],1),n("CModal",{attrs:{title:"Hapus Barang Pesanan",size:"sm",color:"danger",show:a.smallModal},on:{"update:show":function(t){a.smallModal=t}},scopedSlots:a._u([{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"danger"},on:{click:function(t){return a.deleteBarangPesanan()}}},[a._v("Hapus")]),n("CButton",{attrs:{color:"secondary"},on:{click:function(t){a.smallModal=!1}}},[a._v("Batal")])]},proxy:!0}])},[a._v(" Kwitansi ini akan dihapus secara permanen? ")]),n("CModal",{attrs:{show:a.modal,"no-close-on-backdrop":!0,title:"Export Data ke Excel",size:"sm",color:"dark"},on:{"update:show":function(t){a.modal=t}},scopedSlots:a._u([{key:"header",fn:function(){return[n("h6",{staticClass:"modal-title"},[a._v("Export Data ke Excel")]),n("CButtonClose",{staticClass:"text-white",on:{click:function(t){a.modal=!1}}})]},proxy:!0},{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"success"},on:{click:a.storeExcel}},[a._v(a._s(a.exportLabel))])]},proxy:!0}])},[n("CInput",{attrs:{type:"date",label:"Tanggal",horizontal:""},model:{value:a.date,callback:function(t){a.date=t},expression:"date"}})],1)],1)},o=[],r=n("8e44"),i={name:"BarangPesanan",data:function(){return{exportLabel:"Mulai Export",modal:!1,date:null,smallModal:!1,barangPesanan:[],id:0,tableFields:["no","kode_barang","nama_barang","aksi","jumlah","tanggal","alasan","tipe"],tableOptions:{perPage:10,pagination:{chunk:10,dropdown:!1,edge:!0,nav:"fixed"},headings:{no:"No",kode_barang:"Kode Barang",nama_barang:"Nama Barang",jumlah:"Jumlah",tanggal:"Tanggal",alasan:"Alasan",tipe:"Tipe",aksi:"Aksi"},sortable:["no","nama_barang"],columnsClasses:{no:"text-center align-middle",kode_barang:"align-middle",nama_barang:"align-middle",alasan:"text-center align-middle",jumlah:"text-center align-middle",tanggal:"text-center align-middle",tipe:"text-center align-middle",aksi:"text-center align-middle"}}}},methods:{storePDF:function(a){var t=this;this.$swal({title:"Mohon tunggu...",showCloseButton:!1,showCancelButton:!1}),exportPDF(this,"https://young-temple-67589.herokuapp.com/api/pdf/barang/pesanan",{responseType:"blob",headers:{Authorization:"bearer "+localStorage.token}},"barang pesanan.pdf").then((function(){t.$swal.close()})).catch((function(a){return console.log(a),t.$swal("Tidak bisa mengambil data","","error"),setTimeout((function(){t.$swal.close(),t.modal=!1}),2e3),!1}))},getData:function(){var a=this;this.$http.get("https://young-temple-67589.herokuapp.com/api/barang/pesanan",{headers:{Authorization:"bearer "+localStorage.token},redirect:"follow"}).then((function(t){console.log(t.data),t.data.length>0&&(a.barangPesanan=t.data);for(var n=0;n<a.barangPesanan.length;n++)a.barangPesanan[n].nod=n+1})).catch((function(t){return 401!=t.response.status?(console.log(t),alert("Ada sedikit error, harap hubungi pengembang softwarenya yah :)"),!1):(a.$store.dispatch("logout").then((function(){var a=window.location.href;a=a.split("/"),localStorage.setItem("prevPath",a[a.length-1]),alert("Session Login kamu sudah habis! silahkan login kembali")})).then((function(){a.$router.replace({path:"/login"})})).catch((function(a){return alert("An error occured when get data :("),!1})),console.log(t.response),!1)}))},confirmBarangPesanan:function(a){this.id=a},deleteBarangPesanan:function(){var a=this;this.$http.delete("https://young-temple-67589.herokuapp.com/api/barang/pesanan/"+this.id,{headers:{Authorization:"bearer "+localStorage.getItem("token")},redirect:"follow"}).then((function(t){alert(t.data.message),a.smallModal=!1,a.getData()})).catch((function(t){return a.smallModal=!1,alert("Ada sedikit error, harap hubungi pengembang softwarenya yah :)"),console.error(t.response),!1}))},storeExcel:function(){var a=this;null==this.date&&(this.$swal("Tanggal tidak boleh kosong","","warning"),setTimeout((function(){return a.$swal.close(),!1}),2e3),this.exportLabel="Mulai Export"),this.exportLabel="Loading...",Object(r["b"])(this,"https://young-temple-67589.herokuapp.com/api/excel/barang/pesanan",{date:this.date},{responseType:"blob",headers:{Authorization:"bearer "+localStorage.token}},"barang pesanan.xls").then((function(){a.modal=!1,a.exportLabel="Mulai Export"})).catch((function(t){return a.exportLabel="Mulai Export",console.log(t),a.$swal("Tidak bisa mengambil data","","error"),setTimeout((function(){a.$swal.close(),a.modal=!1}),2e3),!1}))}},created:function(){this.getData()}},l=i,s=(n("6a1a"),n("2877")),c=Object(s["a"])(l,e,o,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-4f14a78f.0a6b9ba4.js.map