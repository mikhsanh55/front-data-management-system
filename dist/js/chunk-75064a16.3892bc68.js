(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75064a16"],{4875:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CCard",[n("CCardHeader",[n("p",[n("b",[t._v("Daftar")]),t._v(" Kwitansi")])]),n("CCardBody",[n("CRow",[n("CCol",{attrs:{sm:"12"}},[2!=t.data.level?n("router-link",{staticClass:"float-right mb-4 btn btn-light",attrs:{to:"/kwitansi/add"}},[n("small",[n("i",{staticClass:"fa fa-plus mr-1"}),t._v(" Tambah Kwitansi")])]):t._e(),n("v-client-table",{attrs:{data:t.kwitansi,columns:t.tableFields,options:t.tableOptions,id:"kwitansi_table"},scopedSlots:t._u([{key:"foto",fn:function(t){return n("div",{},[n("img",{attrs:{src:t.row.foto}})])}},{key:"aksi",fn:function(e){return n("div",{staticClass:"d-flex justify-content-center"},[2!=t.data.level?n("button",{staticClass:"text-danger btn btn-secondary btn-sm mr-2",attrs:{title:"export pdf"},on:{click:function(n){return t.storePDF(e.row.id)}}},[n("i",{ref:"id",staticClass:"fa fa-file-pdf-o",attrs:{id:e.row.id}})]):t._e(),2!=t.data.level?n("router-link",{staticClass:"text-primary btn btn-secondary btn-sm mr-2",attrs:{to:"/kwitansi/edit/"+e.row.id,title:"edit kwitansi"}},[n("i",{staticClass:"fa fa-edit"})]):t._e(),2!=t.data.level?n("button",{staticClass:"text-danger btn btn-secondary btn-sm",attrs:{title:"hapus data kwitansi"},on:{click:function(n){return t.deleteKwitansi(e.row.id)}}},[n("i",{ref:"id",staticClass:"fa fa-trash",attrs:{id:e.row.id}})]):t._e()],1)}}])})],1)],1)],1)],1)],1)},o=[],i=n("8e44"),r={name:"Kwitansi",data:function(){return{id:0,data:"",smallModal:!1,tableFields:["nod","no","terima_dari","uang","aksi"],tableOptions:{perPage:10,pagination:{chunk:10,dropdown:!1,edge:!0,nav:"fixed"},headings:{nod:"No",no:"No Kwitansi",terima_dari:"Penerima",uang:"Uang Terbilang",aksi:"Aksi"},sortable:["no","terima_dari"],columnsClasses:{nod:"text-center align-middle",no:"align-middle",terima_dari:"align-middle",uang:"text-center align-middle",aksi:"text-center align-middle"}},kwitansi:[]}},methods:{storePDF:function(t){var e=this;this.$swal({title:"Mohon tunggu...",showCloseButton:!1,showCancelButton:!1}),Object(i["c"])(this,"https://young-temple-67589.herokuapp.com/api/pdf/kwitansi",{responseType:"blob",headers:{Authorization:"bearer "+localStorage.token}},"kwitansi.pdf").then((function(){e.$swal.close()})).catch((function(t){return console.log(t),e.$swal("Tidak bisa mengambil data","","error"),setTimeout((function(){e.$swal.close(),e.modal=!1}),2e3),!1}))},getData:function(){var t=this;this.$http.get("https://young-temple-67589.herokuapp.com/api/kwitansi",{headers:{Authorization:"bearer "+localStorage.getItem("token")},redirect:"follow"}).then((function(e){console.log(e.data),e.data.length>0&&(t.kwitansi=e.data);for(var n=0;n<t.kwitansi.length;n++)t.kwitansi[n].nod=n+1})).catch((function(e){return 401!=e.response.status?(console.log(e),t.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){t.$swal.close(),t.$router.replace({path:"/login"})}),1500),!1):(t.$store.dispatch("logout").then((function(){var e=window.location.href;e=e.split("/"),localStorage.setItem("prevPath",e[e.length-1]),t.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){t.$swal.close(),t.$router.replace({path:"/login"})}),1500)})).catch((function(e){return t.$swal("Tidak bisa ambil data","hubungi pengembangnya...","danger"),setTimeout((function(){t.$swal.close(),t.$router.replace({path:"/login"})}),1500),!1})),console.log(e.response),!1)}))},deleteKwitansi:function(t){var e=this;this.$http.delete("https://young-temple-67589.herokuapp.com/api/kwitansi/"+t,{headers:{Authorization:"bearer "+localStorage.getItem("token")},redirect:"follow"}).then((function(t){e.$swal("Data kwitansi berhasil dihapus","Mohon tunggu sebentar...","success"),setTimeout((function(){e.$swal.close(),e.getData()}),1500)})).catch((function(t){return e.$swal("Tidak bisa menghapus data","hubungi pengembangnya...","danger"),setTimeout((function(){e.$swal.close()}),1500),console.error(t.response),!1}))}},created:function(){this.getData()},mounted:function(){this.data=this.$store.getters.userData}},s=r,c=(n("88c6"),n("2877")),l=Object(c["a"])(s,a,o,!1,null,null,null);e["default"]=l.exports},7433:function(t,e,n){},"88c6":function(t,e,n){"use strict";var a=n("7433"),o=n.n(a);o.a},"8e44":function(t,e,n){"use strict";function a(t,e,n,a,o){return new Promise((function(i,r){t.$http.post(e,n,a).then((function(t){var e=URL.createObjectURL(new Blob([t.data],{type:"application/vnd.ms-excel"})),n=document.createElement("a");n.href=e,n.setAttribute("download",o),document.body.appendChild(n),n.click()})).then((function(){i()})).catch((function(t){r(t)}))}))}function o(t,e,n,a){return new Promise((function(o,i){t.$http.get(e,n).then((function(t){var e=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"})),n=document.createElement("a");n.href=e,n.setAttribute("download",a),document.body.appendChild(n),n.click()})).then((function(){o()})).catch((function(t){i(t)}))}))}function i(t,e,n,a){return new Promise((function(t,a){fetch(e,n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return a(t)}))}))}function r(t){return new Promise((function(e,n){t.$http.get("https://young-temple-67589.herokuapp.com/api/po",{headers:{Authorization:"bearer "+localStorage.token}}).then((function(t){for(var e=[],n=[],a=0;a<t.data.length;a++){var o=new Date(t.data[a].date_line),i=new Date(o.setDate(o.getDate()-2));e.push({date:i,data:t.data[a],link:"/po/"+t.data[a].id})}for(var r=0;r<e.length;r++){var s=new Date,c=new Date(e[r].date);s==c&&n.push({date:e[r].date,data:e[r]})}return localStorage.setItem("notif",JSON.stringify(n)),n})).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))}function s(){return new Promise((function(t,e){fetch("https://young-temple-67589.herokuapp.com/api/order/barang/po",{headers:{Authorization:"bearer "+localStorage.token}}).then((function(t){return t.json()})).then((function(t){console.warn("ORDER BARANG"),console.log(t),t.forEach((function(t,e){fetch("https://young-temple-67589.herokuapp.com/api/po/"+t.id_po,{method:"post",headers:{Authorization:"bearer "+localStorage.token}}).then((function(t){return t.json()})).then((function(t){console.warn("PO"),console.log(t)}))}))}))}))}n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return s}))}}]);
//# sourceMappingURL=chunk-75064a16.3892bc68.js.map