(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9572d29c"],{"06f1":function(t,a,e){},2496:function(t,a,e){"use strict";var n=e("06f1"),s=e.n(n);s.a},"8e44":function(t,a,e){"use strict";function n(t,a,e,n,s){return new Promise((function(o,i){t.$http.post(a,e,n).then((function(t){var a=URL.createObjectURL(new Blob([t.data],{type:"application/vnd.ms-excel"})),e=document.createElement("a");e.href=a,e.setAttribute("download",s),document.body.appendChild(e),e.click()})).then((function(){o()})).catch((function(t){i(t)}))}))}function s(t,a,e,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get";return new Promise((function(o,i){"get"==s?t.$http.get(a,e).then((function(t){var a=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"})),e=document.createElement("a");e.href=a,e.setAttribute("download",n),document.body.appendChild(e),e.click()})).then((function(){o()})).catch((function(t){i(t)})):t.$http.post(a,e).then((function(t){var a=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"})),e=document.createElement("a");e.href=a,e.setAttribute("download",n),document.body.appendChild(e),e.click()})).then((function(){o()})).catch((function(t){i(t)}))}))}function o(t,a,e,n){return new Promise((function(t,n){fetch(a,e).then((function(t){return t.json()})).then((function(a){return t(a)})).catch((function(t){return n(t)}))}))}function i(t){return new Promise((function(a,e){t.$http.get("https://young-temple-67589.herokuapp.com/api/po",{headers:{Authorization:"bearer "+localStorage.token}}).then((function(t){for(var a=[],e=[],n=0;n<t.data.length;n++){var s=new Date(t.data[n].date_line),o=new Date(s.setDate(s.getDate()-2));a.push({date:o,data:t.data[n],link:"/po/"+t.data[n].id})}for(var i=0;i<a.length;i++){var r=new Date,l=new Date(a[i].date);r==l&&e.push({date:a[i].date,data:a[i]})}return localStorage.setItem("notif",JSON.stringify(e)),e})).then((function(t){return a(t)})).catch((function(t){return e(t)}))}))}function r(t,a){return new Promise((function(e,n){var s=-1;Promise.all(t.map((function(t){return s++,fetch(t,a[s])}))).then((function(t){return Promise.all(t.map((function(t){return t.json()})))})).then((function(t){e(t)})).catch((function(t){return n(t)}))}))}e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"e",(function(){return o})),e.d(a,"a",(function(){return i})),e.d(a,"d",(function(){return r}))},9089:function(t,a,e){t.exports=e.p+"img/default.0dd67022.svg"},ba32:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("CCard",[n("CCardHeader",[n("b",[t._v("Data")]),t._v(" Purchase Order ")]),n("CCardBody",[n("CRow",{staticClass:"mx-auto d-flex justify-content-center"},[n("CCol",{staticClass:"mt-4",attrs:{sm:"8"}},[n("table",{staticClass:"table table-bordered table-striped"},[n("tr",[n("th",{staticClass:"w-50"},[t._v("Nama Sales")]),n("td",[t._v(t._s(t.po.nama_sales))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Nama Konsumen")]),n("td",[t._v(t._s(t.po.nama_konsumen))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Nama Kurir")]),n("td",[t._v(t._s(t.po.nama_kurir))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("No PO")]),n("td",[t._v(t._s(t.po.no_po))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Tanggal PO Masuk")]),n("td",[t._v(t._s(t.po.tgl_po_masuk))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Tanggal PO")]),n("td",[t._v(t._s(t.po.date))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Tanggal Pengiriman")]),n("td",[t._v(t._s(t.po.date_line))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("TOP")]),n("td",[t._v(t._s(t.po.jatuh_tempo))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Keterangan")]),n("td",[t._v(t._s(t.po.keterangan))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Tax Rate")]),n("td",[t._v(t._s(t.po.tax_rate))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Sales Fee")]),n("td",[t._v(t._s(t.po.sales_fee))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Other")]),n("td",[t._v(t._s(t.po.other))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("No Surat Jalan")]),n("td",[t._v(t._s(t.po.no_surat_jalan))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("No Invoice")]),n("td",[t._v(t._s(t.po.no_invoice))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Catatan")]),n("td",[t._v(t._s(t.po.catatan))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Status")]),n("td",[n("CSelect",{attrs:{horizontal:"",options:t.status},on:{"update:value":t.assignStatus},model:{value:t.detailpo.status,callback:function(a){t.$set(t.detailpo,"status",a)},expression:"detailpo.status"}})],1)]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Sub Total")]),n("td",[t._v("Rp "+t._s(t._f("formatMoney")(t.po.sub_total)))])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Discount")]),n("td")]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Sales Tax Rate")]),n("td",[t._v(" "+t._s(t.po.sales_tax_rate)+" ")])]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Sales Tax")]),n("td")]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Other Cost")]),n("td")]),n("tr",[n("th",{staticClass:"w-50"},[t._v("Grand Total")]),n("td")])])])],1),n("CRow",[n("CCol",{staticClass:"d-flex justify-content-end mt-4 mb-4",attrs:{sm:"10"}},[n("button",{staticClass:"btn btn-light",on:{click:t.updateStatus}},[n("i",{staticClass:"fa fa-edit mr-2"}),t._v(" "+t._s(t.label)+" ")])])],1),n("hr",{staticClass:"text-center w-75"}),n("br"),n("CRow",[n("CCol",{attrs:{sm:"12"}},[n("v-client-table",{staticClass:"m-4",attrs:{data:t.po_barang,columns:t.tableFields,options:t.tableOptions,id:"barang_tables"},scopedSlots:t._u([{key:"foto",fn:function(t){return n("div",{},["https://young-temple-67589.herokuapp.com/"+t.row.foto==1?n("div",{staticClass:"mx-auto d-flex justify-content-center"},[n("img",{staticStyle:{"border-radius":"50%"},attrs:{src:"https://young-temple-67589.herokuapp.com/"+t.row.foto}})]):n("div",{staticClass:"mx-auto d-flex justify-content-center"},[n("img",{staticClass:"img-thumbnail",staticStyle:{"border-radius":"50%",width:"35px",height:"35px"},attrs:{src:e("9089")}})])])}}])})],1)],1)],1)],1)],1)},s=[],o=e("8e44"),i={name:"DetailPO",data:function(){return{status:[],label:"Update Status PO",data:this.$store.getters.userData,tableFields:["no","foto","kode_barang","nama_barang","spesifikasi","stock"],tableOptions:{perPage:10,pagination:{chunk:10,dropdown:!1,edge:!0,nav:"fixed"},headings:{no:"No",foto:"Foto",kode_barang:"Kode Barang",nama_barang:"Nama Barang",spesifikasi:"Spesifikasi Barang",stock:"Stock"},sortable:["nama_barang"],filterable:["nama_barang","kode_barang","spesifikasi","no"],columnsClasses:{no:"text-center align-middle",foto:"text-center align-middle",kode_barang:"align-middle",nama_barang:"align-middle",spesifikasi:"align-middle",stock:"text-center align-middle"}},po_barang:[],info_po:"",info_barang_po:[],detailpo:{status:2,level:0},po:{nama_sales:null,nama_konsumen:null,nama_kurir:null,no_po:null,date:null,date_line:null,jatuh_tempo:null,keterangan:null,tax_rate:null,sales_fee:null,other:null,no_surat_jalan:null,no_invoice:null,status:null,catatan:null,tgl_po_masuk:null,sub_total:0,sales_tax_rate:0,disc:0}}},methods:{assignStatus:function(t){this.detailpo.status=value},updateStatus:function(){var t=this;this.label="Loading...",this.$http.post("https://young-temple-67589.herokuapp.com/api/po/edit/"+this.$route.params.id,this.detailpo,{headers:{Authorization:"bearer "+localStorage.token},redirect:"follow"}).then((function(){t.label="Update Status PO",t.$swal("Status berhasil diupdate","Mohon tunggu sebentar...","success"),setTimeout((function(){return t.$swal.close()}),1500),t.getData()})).catch((function(a){return t.label="Update Status PO",console.error(a),t.$swal("Status gagal diupdate","Hubungi pengembangnya...","error"),setTimeout((function(){return t.$swal.close}),1500),!1}))},getData:function(){var t=this,a=new Headers;a.append("Authorization","bearer "+localStorage.token);var e={method:"POST",headers:a,redirect:"follow"};fetch("https://young-temple-67589.herokuapp.com/api/po/"+this.$route.params.id,e).then((function(t){return t.json()})).then((function(a){console.log(a),t.po=a,t.detailpo.status=a.status,t.po.sub_total=0,t.po.sales_tax_rate=0})).catch((function(t){return console.error(t),!1}))},getDataTable:function(){var t=this;return new Promise((function(a,e){t.$http.post("https://young-temple-67589.herokuapp.com/api/order/barang/po/detail/"+t.$route.params.id,{headers:{Authorization:"bearer "+localStorage.token}}).then((function(e){var n=[];t.info_po=e.data,t.info_po.forEach((function(a,e){Object(o["e"])(t,"https://young-temple-67589.herokuapp.com/api/barang/"+a.id_barang,{method:"POST",headers:{Authorization:"bearer "+localStorage.token}},"POST").then((function(s){a.nama_barang=s.nama_barang,a.kode_barang=a.spesifikasi=s.spesifikasi,a.foto=n.push({no:++e,foto:"https://young-temple-67589.herokuapp.com/"+s.foto,kode_barang:s.kode_barang,nama_barang:s.nama_barang,spesifikasi:s.spesifikasi,stock:s.stock}),t.po.sub_total+=s.harga_jual,t.po.sales_tax_rate+=0}))})),a(n)})).catch((function(t){e(t)}))}))}},filters:{formatMoney:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{a=Math.abs(a),a=isNaN(a)?2:a;var s=t<0?"-":"",o=parseInt(t=Math.abs(Number(t)||0).toFixed(a)).toString(),i=o.length>3?o.length%3:0;return s+(i?o.substr(0,i)+n:"")+o.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+n)+(a?e+Math.abs(t-o).toFixed(a).slice(2):"")}catch(r){console.log(r)}}},created:function(){var t=this;this.getData(),this.getDataTable().then((function(a){t.po_barang=a})),this.data=this.$store.getters.userData,6==this.data.level?(this.status=[{label:"Request",value:1},{label:"Proses",value:2}],this.detailpo.level=6):3==this.data.level?(this.status=[{label:"Request",value:1},{label:"Pengiriman",value:3},{label:"Selesai",value:4}],this.detailpo.level=3):(this.status=[{label:"Request",value:1},{label:"Proses",value:2},{label:"Pengiriman",value:3},{label:"Selesai",value:4},{label:"Batal",value:5}],this.detailpo.level=this.data.level)}},r=i,l=(e("2496"),e("2877")),u=Object(l["a"])(r,n,s,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-9572d29c.c35a1eef.js.map