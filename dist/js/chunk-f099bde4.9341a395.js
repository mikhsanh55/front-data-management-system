(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f099bde4"],{"8e44":function(a,t,e){"use strict";function n(a,t,e,n,s){return new Promise((function(i,r){a.$http.post(t,e,n).then((function(a){var t=URL.createObjectURL(new Blob([a.data],{type:"application/vnd.ms-excel"})),e=document.createElement("a");e.href=t,e.setAttribute("download",s),document.body.appendChild(e),e.click()})).then((function(){i()})).catch((function(a){r(a)}))}))}function s(a,t,e,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get";return new Promise((function(i,r){"get"==s?a.$http.get(t,e).then((function(a){var t=URL.createObjectURL(new Blob([a.data],{type:"application/pdf"})),e=document.createElement("a");e.href=t,e.setAttribute("download",n),document.body.appendChild(e),e.click()})).then((function(){i()})).catch((function(a){r(a)})):a.$http.post(t,e).then((function(a){var t=URL.createObjectURL(new Blob([a.data],{type:"application/pdf"})),e=document.createElement("a");e.href=t,e.setAttribute("download",n),document.body.appendChild(e),e.click()})).then((function(){i()})).catch((function(a){r(a)}))}))}function i(a){return new Promise((function(t,e){a.$http.get(localStorage.base_api+"po",{headers:{Authorization:"bearer "+localStorage.token}}).then((function(a){for(var t=[],e=[],n=0;n<a.data.length;n++){var s=new Date(a.data[n].date_line),i=new Date(s.setDate(s.getDate()-2));t.push({date:i,data:a.data[n],link:"po/detail/"+a.data[n].id})}for(var r=0;r<t.length;r++){var o=new Date,l=new Date(t[r].date);o==l&&e.push({date:t[r].date,data:t[r]})}return localStorage.setItem("notif",JSON.stringify(t)),t})).then((function(a){return t(a)})).catch((function(a){return e(a)}))}))}function r(a,t){return new Promise((function(e,n){var s=-1;Promise.all(a.map((function(a){return s++,fetch(a,t[s])}))).then((function(a){return Promise.all(a.map((function(a){return a.json()})))})).then((function(a){e(a)})).catch((function(a){return n(a)}))}))}function o(a,t,e,n){return new Promise((function(n,s){fetch(t,e).then((function(t){return 401==t.status?(a.$swal("Maaf sesi login kamu sudah habis","silahkan login lagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$store.dispatch("logout").then((function(){return a.$router.replace("/login")}))}),1500),!1):500==t.status?(a.$swal("Tidak bisa mengambil data","Mohon hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),!1):t.json()})).then((function(a){return n(a)})).catch((function(a){return s(a)}))}))}function l(a,t,e){return new Promise((function(n,s){fetch(t,e).then((function(t){return 401==t.status?(a.$swal("Maaf sesi login kamu sudah habis","silahkan login lagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$store.dispatch("logout").then((function(){return a.$router.replace("/login")}))}),1500),!1):500==t.status?(a.$swal("Tidak bisa menghapus data","Mohon hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),!1):t.json()})).then((function(a){return n(a)})).catch((function(a){return s(a)}))}))}e.d(t,"c",(function(){return n})),e.d(t,"d",(function(){return s})),e.d(t,"a",(function(){return i})),e.d(t,"e",(function(){return r})),e.d(t,"f",(function(){return o})),e.d(t,"b",(function(){return l}))},"9a66":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("CCard",[e("CCardHeader",[e("p",[e("b",[a._v("Edit")]),a._v(" Asset")])]),e("CCardBody",[e("CForm",{staticClass:"mt-4"},[e("CRow",{staticClass:"mx-auto d-flex justify-content-center"},[e("CCol",{attrs:{sm:"8"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:1==a.validMsg,expression:"validMsg == true"}],staticClass:"alert alert-success"},[e("small",[a._v("Asset berhasil diperbaharui!")])]),e("input",{ref:"id",attrs:{type:"hidden",name:"id",id:a.asset.id}}),e("CInput",{attrs:{type:"text",description:a.validator.kode_msg,"is-valid":a.validator.kode,autocomplete:"kode",label:"Kode Asset",horizontal:"",placeholder:"Masukan Kode Asset"},on:{input:function(t){a.asset.kode.length<1?a.validator.kode=!1:a.validator.kode=!0}},model:{value:a.asset.kode,callback:function(t){a.$set(a.asset,"kode",t)},expression:"asset.kode"}}),e("CTextarea",{attrs:{description:a.validator.deskripsi_barang_msg,"is-valid":a.validator.deskripsi_barang,label:"Masukan Deskripsi Asset",placeholder:"Masukan Deskripsi Asset",horizontal:"",rows:"3"},on:{input:function(t){a.asset.deskripsi_barang.length<1?a.validator.deskripsi_barang=!1:a.validator.deskripsi_barang=!0}},model:{value:a.asset.deskripsi_barang,callback:function(t){a.$set(a.asset,"deskripsi_barang",t)},expression:"asset.deskripsi_barang"}}),e("CSelect",{attrs:{label:"Karyawan",horizontal:"",options:a.karyawan},on:{"update:value":a.assignKaryawan},model:{value:a.asset.id_karyawan,callback:function(t){a.$set(a.asset,"id_karyawan",t)},expression:"asset.id_karyawan"}}),e("CInput",{attrs:{type:"date",description:a.validator.tanggal_beli_msg,"is-valid":a.validator.tanggal_beli,autocomplete:"tanggal_beli",label:"Tanggal Beli",horizontal:"",placeholder:"Masukan Tanggal Beli"},on:{input:function(t){a.asset.tanggal_beli.length<1?a.validator.tanggal_beli=!1:a.validator.tanggal_beli=!0}},model:{value:a.asset.tanggal_beli,callback:function(t){a.$set(a.asset,"tanggal_beli",t)},expression:"asset.tanggal_beli"}}),e("CInput",{attrs:{type:"date",description:a.validator.tanggal_expired_msg,"is-valid":a.validator.tanggal_expired,autocomplete:"tanggal_expired",label:"Tanggal Expired",horizontal:"",placeholder:"Masukan Tanggal Expired"},on:{input:function(t){a.asset.tanggal_expired.length<1?a.validator.tanggal_expired=!1:a.validator.tanggal_expired=!0}},model:{value:a.asset.tanggal_expired,callback:function(t){a.$set(a.asset,"tanggal_expired",t)},expression:"asset.tanggal_expired"}})],1)],1)],1)],1),e("CCardFooter",{staticClass:"d-flex justify-content-center mt-4"},[e("CButton",{attrs:{type:"submit",color:"primary"},on:{click:function(t){return t.preventDefault(),a.updateAsset(t)}}},[e("i",{staticClass:"fa fa-edit mr-2"}),a._v(a._s(a.label)+" ")])],1)],1)],1)},s=[],i=e("8e44"),r={name:"EditAsset",data:function(){return{label:"Simpan Perubahan",karyawanselected:1,base_api:localStorage.base_api,validator:{kode:null,kode_msg:null,deskripsi_barang:null,deskripsi_barang_msg:null,tanggal_beli:null,tanggal_beli_msg:null,tanggal_expired:null,tanggal_expired_msg:null},asset:{kode:null,deskripsi_barang:null,id_karyawan:null,id:null,tanggal_beli:"0000-00-00",tanggal_expired:"0000-00-00"},validMsg:!1,karyawan:[],errors:[]}},methods:{getKaryawan:function(){var a=this,t=new Headers;t.append("Authorization","bearer "+localStorage.getItem("token"));var e={method:"GET",headers:t,redirect:"follow"};Object(i["f"])(this,this.base_api+"karyawan",e).then((function(t){for(var e=0;e<t.length;e++){var n={};n.value=t[e].id,n.label=t[e].nama_karyawan,a.karyawan.push(n)}})).then((function(){a.getData()})).catch((function(t){return a.$swal("Tidak bisa ambil data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),console.error(t),!1}))},assignJabatan:function(a){this.asset.jabatan=a},assignKaryawan:function(a){this.asset.id=a},getData:function(){var a=this,t=new Headers;t.append("Authorization","bearer "+localStorage.token);var e={method:"POST",headers:t,redirect:"follow"};Object(i["f"])(this,this.base_api+"assets/"+this.$route.params.id,e).then((function(t){a.jabatanselected=t.jabatan,a.karyawanselected=t.id,a.asset=t,console.log(a.asset)})).catch((function(t){return 401==t.response.status?a.$store.dispatch("logout").then((function(){var t=window.location.href;t=t.split("/"),localStorage.setItem("prevPath",t[t.length-1]),a.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$router.replace({path:"/login"})}),1500)})).catch((function(t){return a.$swal("Tidak bisa mengambil data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),!1})):500==t.response.status&&(a.$swal("Tidak bisa mengambil data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500)),console.log(t.response),!1}))},updateAsset:function(){var a=this;if(this.errors=[],this.asset.kode||(this.validator.kode=!1,this.validator.kode_msg="Harap isi kode asset",this.errors.push("kode asset kosong")),this.asset.tanggal_beli&&"0000-00-00"!=this.asset.tanggal_beli||(this.validator.tanggal_beli=!1,this.validator.tanggal_beli_msg="Harap isi tanggal beli",this.errors.push("tgl_beli karyawan kosong")),this.asset.tanggal_expired&&"0000-00-00"!=this.asset.tanggal_expired||(this.validator.tanggal_expired=!1,this.validator.tgl_expired_msg="Harap isi tanggal kadaluarsa",this.errors.push("tgl_expired karyawan kosong")),this.errors.length)return window.scrollBy({top:-250,left:0,behavior:"smooth"}),!1;this.label="Loading...";var t=new FormData;t.append("kode",this.asset.kode),t.append("id_karyawan",this.asset.id_karyawan),t.append("deskripsi_barang",this.asset.deskripsi_barang),t.append("tanggal_beli",this.asset.tanggal_beli),t.append("tanggal_expired",this.asset.tanggal_expired),this.$http.post(this.base_api+"assets/edit/"+this.$route.params.id,t,{headers:{Authorization:"bearer "+localStorage.token}}).then((function(t){a.label="Simpan Perubahan",a.$swal("Update data asset berhasil","Mohon tunggu sebentar...","success"),setTimeout((function(){a.$swal.close(),a.$router.push({path:"/asset"})}),1500)})).catch((function(t){return a.label="Simpan Perubahan",401!=t.response.status?(a.$swal("Gagal edit data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),a.label="Simpan Perubahan",console.log(t),!1):(a.$store.dispatch("logout").then((function(){var t=window.location.href;t=t.split("/"),localStorage.setItem("prevPath",t[t.length-1]),a.$swal("Sesi login kamu sudah habis","login kagi yah...","warning"),setTimeout((function(){a.$swal.close(),a.$router.replace({path:"/login"})}),1500)})).catch((function(t){return a.$swal("Gagal edit data","hubungi pengembangnya...","error"),setTimeout((function(){a.$swal.close()}),1500),!1})),!1)}))}},created:function(){1!=localStorage.level&&2!=localStorage.level&&7!=localStorage.level&&3!=localStorage.level&&this.$router.push("/"),this.getKaryawan()}},o=r,l=e("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-f099bde4.9341a395.js.map