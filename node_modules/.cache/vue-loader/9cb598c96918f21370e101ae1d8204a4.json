{"remainingRequest":"/home/ranmark/Documents/ikhsan/alkes/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ranmark/Documents/ikhsan/alkes/src/views/users/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ranmark/Documents/ikhsan/alkes/src/views/users/Profile.vue","mtime":1581140224666},{"path":"/home/ranmark/Documents/ikhsan/alkes/node_modules/cache-loader/dist/cjs.js","mtime":1580306576757},{"path":"/home/ranmark/Documents/ikhsan/alkes/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1580306576439},{"path":"/home/ranmark/Documents/ikhsan/alkes/node_modules/cache-loader/dist/cjs.js","mtime":1580306576757},{"path":"/home/ranmark/Documents/ikhsan/alkes/node_modules/vue-loader/lib/index.js","mtime":1580306701317}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0RGF0YXN9IGZyb20gJ0AvY29udGFpbmVycy9nbG9iYWwtZnVuY3Rpb24uanMnCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6IlByb2ZpbGUiLAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlsYWJlbDogJ1ViYWggUGFzc3dvcmQnLAoJCQl1c2VyOicnLAoJCQlwYXNzd29yZDpudWxsLAoJCQljb25maXJtUGFzc3dvcmQ6bnVsbCwKCQkJdXJpOmxvY2FsU3RvcmFnZS5iYXNlX3VyaQoJCX0KCX0sCgltZXRob2RzOiB7CgkJZ2V0RGF0YShpZCkgewoJCQkvLyB0aGlzLiRodHRwLnBvc3QobG9jYWxTdG9yYWdlLmJhc2VfYXBpICsgJ2thcnlhd2FuLycgKyBpZCwgewoJCQkvLyAJaGVhZGVyczogewoJCQkvLyAJCSdBdXRob3JpemF0aW9uJzonYmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQoJCQkvLyAJfSwKCQkJLy8gCXJlZGlyZWN0Oidmb2xsb3cnCgkJCS8vIH0pCgkJCWdldERhdGFzKHRoaXMsIGxvY2FsU3RvcmFnZS5iYXNlX2FwaSArICdrYXJ5YXdhbi8nICsgaWQsIHttZXRob2Q6J3Bvc3QnLCBoZWFkZXJzOnsnQXV0aG9yaXphdGlvbic6J2JlYXJlciAnICsgbG9jYWxTdG9yYWdlLnRva2VufX0sICdwb3N0JykKCQkJLnRoZW4ocmVzID0+IHsKCQkJCWNvbnNvbGUubG9nKHJlcykKCQkJfSkKCQkJLmNhdGNoKGUgPT4gewoJCQkJY29uc29sZS5lcnJvcihlLnJlc3BvbnNlKQoJCQkJcmV0dXJuIGZhbHNlCgkJCX0pCgoJCX0sCgkJY2hhbmdlUGFzc3dvcmQoKSB7CgkJCWxldCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UudXNlcikKCQkJaWYodGhpcy5wYXNzd29yZCAhPSB0aGlzLmNvbmZpcm1QYXNzd29yZCApIHsKCQkJCXRoaXMuJHN3YWwoJ1Bhc3N3b3JkIHRpZGFrIHNhbWEnLCAnJywgJ2Vycm9yJykKCQkJCXNldFRpbWVvdXQoKCkgPT4gdGhpcy4kc3dhbC5jbG9zZSgpLCAxNTAwKQoJCQkJcmV0dXJuIGZhbHNlCgkJCX0KCQkJZWxzZSBpZighdGhpcy5wYXNzd29yZCB8fCAhdGhpcy5jb25maXJtUGFzc3dvcmQpIHsKCQkJCXRoaXMuJHN3YWwoJ1Bhc3N3b3JkIGhhcnVzIGRpaXNpJywgJycsICdlcnJvcicpCgkJCQlzZXRUaW1lb3V0KCgpID0+IHRoaXMuJHN3YWwuY2xvc2UoKSwgMTUwMCkKCQkJCXJldHVybiBmYWxzZQoJCQl9CgkJCWVsc2UgewoJCQkJdGhpcy5sYWJlbCA9ICdMb2FkaW5nLi4uJwoJCQkJdGhpcy4kaHR0cC5wb3N0KGxvY2FsU3RvcmFnZS5iYXNlX2FwaSArICd1c2VyL3Bhc3N3b3JkL2VkaXQvJyArIHVzZXIuaWQsIHtuZXdfcGFzc3dvcmQ6dGhpcy5wYXNzd29yZCwgbmV3X3Bhc3N3b3JkX2NvbmZpcm1hdGlvbjp0aGlzLmNvbmZpcm1QYXNzd29yZH0sIHsKCQkJCQloZWFkZXJzOiB7CgkJCQkJCSdBdXRob3JpemF0aW9uJzogJ2JlYXJlciAnICsgbG9jYWxTdG9yYWdlLnRva2VuCgkJCQkJfQoJCQkJfSkKCQkJCS50aGVuKHJlcyA9PiB7CgkJCQkJY29uc29sZS5sb2cocmVzKQoJCQkJCXRoaXMuJHN3YWwoJ1Bhc3N3b3JkIHN1ZGFoIGRpcnViYWghJywgJ01vaG9uIHR1bmdndS4uLicsICdzdWNjZXNzJykKCQkJCQlzZXRUaW1lb3V0KCgpID0+IHRoaXMuJHN3YWwuY2xvc2UoKSwgMTUwMCkKCQkJCX0pCgkJCQkuY2F0Y2goZSA9PiB7CgkJCQkJdGhpcy4kc3dhbCgnUGFzc3dvcmQgZ2FnYWwgZGlydWJhaCEnLCAnTW9ob24gdHVuZ2d1Li4uJywgJ2Vycm9yJykKCQkJCQlzZXRUaW1lb3V0KCgpID0+IHRoaXMuJHN3YWwuY2xvc2UoKSwgMTUwMCkKCQkJCQlyZXR1cm4gZmFsc2UKCQkJCX0pCgkJCX0KCQl9Cgl9LAoJY3JlYXRlZCgpIHsKCQlsZXQgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnVzZXIpCgkJZ2V0RGF0YXModGhpcywgbG9jYWxTdG9yYWdlLmJhc2VfYXBpICsgJ2thcnlhd2FuLycgKyB1c2VyLmlkX2thcnlhd2FuLCB7CgkJCW1ldGhvZDoncG9zdCcsCgkJCWhlYWRlcnM6IHsKCQkJCSdBdXRob3JpemF0aW9uJyA6ICdiZWFyZXIgJyArIGxvY2FsU3RvcmFnZS50b2tlbgoJCQl9CgkJfSkJCgkJLnRoZW4ocmVzID0+IHsKCQkJdGhpcy51c2VyID0gcmVzCgkJfSkKCQkuY2F0Y2goZSA9PiB7CgkJCWNvbnNvbGUuZXJyb3IoZSkKCQkJcmV0dXJuIGZhbHNlCgkJfSkKCX0KfQo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views/users","sourcesContent":["<template>\n\t<div>\n\t\t<CCard>\n\t\t\t<CCardHeader>\n\t\t\t\t<CRow>\n\t\t\t\t\t<CCol sm=\"12\">\n\t\t\t\t\t\tProfile\n\t\t\t\t\t</CCol>\n\t\t\t\t</CRow>\n\t\t\t</CCardHeader>\n\t\t\t<CCardBody>\n\t\t\t\t<CRow>\n\t\t\t\t\t<CCol sm=\"12\">\n\n\t\t\t\t\t\t<table class=\"table table-borderless\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Foto Profile</td>\n\t\t\t\t\t\t\t\t<td><img :src=\"uri + user.foto\" width=\"100\" height=\"100\" /></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Nama</td>\n\t\t\t\t\t\t\t\t<td> {{user.nama_karyawan}} </td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>No Pegawai</td>\n\t\t\t\t\t\t\t\t<td> {{user.no_karyawan}} </td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Email</td>\n\t\t\t\t\t\t\t\t<td> {{user.email}} </td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Password</td>\n\t\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password1\" class=\"form-control\" v-model=\"password\"></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Confirm Password</td>\n\t\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password2\" class=\"form-control\" v-model=\"confirmPassword\" ></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>Alamat</td>\n\t\t\t\t\t\t\t\t<td> {{user.alamat}} </td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<div class=\"text-center mx-auto\">\n\t\t\t\t\t\t\t<button @click=\"changePassword\" class=\"btn btn-success\"> {{label}} </button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CCol>\n\t\t\t\t</CRow>\n\t\t\t</CCardBody>\n\t\t</CCard>\n\t</div>\n</template>\n<script >\n\timport {getDatas} from '@/containers/global-function.js'\n\texport default {\n\t\tname:\"Profile\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tlabel: 'Ubah Password',\n\t\t\t\tuser:'',\n\t\t\t\tpassword:null,\n\t\t\t\tconfirmPassword:null,\n\t\t\t\turi:localStorage.base_uri\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetData(id) {\n\t\t\t\t// this.$http.post(localStorage.base_api + 'karyawan/' + id, {\n\t\t\t\t// \theaders: {\n\t\t\t\t// \t\t'Authorization':'bearer ' + localStorage.getItem('token')\n\t\t\t\t// \t},\n\t\t\t\t// \tredirect:'follow'\n\t\t\t\t// })\n\t\t\t\tgetDatas(this, localStorage.base_api + 'karyawan/' + id, {method:'post', headers:{'Authorization':'bearer ' + localStorage.token}}, 'post')\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.error(e.response)\n\t\t\t\t\treturn false\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tchangePassword() {\n\t\t\t\tlet user = JSON.parse(localStorage.user)\n\t\t\t\tif(this.password != this.confirmPassword ) {\n\t\t\t\t\tthis.$swal('Password tidak sama', '', 'error')\n\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\telse if(!this.password || !this.confirmPassword) {\n\t\t\t\t\tthis.$swal('Password harus diisi', '', 'error')\n\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.label = 'Loading...'\n\t\t\t\t\tthis.$http.post(localStorage.base_api + 'user/password/edit/' + user.id, {new_password:this.password, new_password_confirmation:this.confirmPassword}, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Authorization': 'bearer ' + localStorage.token\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tthis.$swal('Password sudah dirubah!', 'Mohon tunggu...', 'success')\n\t\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\tthis.$swal('Password gagal dirubah!', 'Mohon tunggu...', 'error')\n\t\t\t\t\t\tsetTimeout(() => this.$swal.close(), 1500)\n\t\t\t\t\t\treturn false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tlet user = JSON.parse(localStorage.user)\n\t\t\tgetDatas(this, localStorage.base_api + 'karyawan/' + user.id_karyawan, {\n\t\t\t\tmethod:'post',\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization' : 'bearer ' + localStorage.token\n\t\t\t\t}\n\t\t\t})\t\n\t\t\t.then(res => {\n\t\t\t\tthis.user = res\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.error(e)\n\t\t\t\treturn false\n\t\t\t})\n\t\t}\n\t}\n</script>"]}]}